<!DOCTYPE html>
<html>
    <head>
        <title>
            Prototype
        </title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script type="text/javascript">

          $('document').ready( function() {
          
          //access token : EAACEdEose0cBAGTdpp2ZCL3I328YKO7jOt4ORwwdZArzkwVZCQelTjhSxCGrOeAtZAF8bA5w8EZA8DR7Lggw03mB07Fwy7hogLMK58qwQx44Hdzv2VPtXPDjZAk7go4k2P2XrytQf5Jrp0a0cgEJtbYJvR3eI2HLcUNBfJ8BlKaU5usyZBTDPluvDiQWLtTIW8ZD

            window.fbAsyncInit = function() { 

              FB.init({
                appId      : '722531051233683',
                xfbml      : true,
                version    : 'v2.8'
              });

              FB.AppEvents.logPageView();

              $('.login').on('click', function() {

                FB.login();

                FB.getLoginStatus(function(response) {

                  statusChangeCallback(response);

                });

                function statusChangeCallback(response) {

                  console.log('statusChangeCallback');
                  console.log(response);
                  
                  if (response.status === 'connected') {

                    firstAPIQuery();
                    
                  } 
                  else if (response.status === 'not_authorized') {
                    
                    document.getElementById('status').innerHTML = 'Please log ' +
                      'into this app.';
                  } 
                  else {
                    
                    document.getElementById('status').innerHTML = 'Please log ' +
                      'into Facebook.';
                  }
                };
              });
            };
              
              (function(d, s, id) {
               var js, fjs = d.getElementsByTagName(s)[0];
               if (d.getElementById(id)) {return;}
               js = d.createElement(s); js.id = id;
               js.src = "http://connect.facebook.net/en_US/sdk.js";
               fjs.parentNode.insertBefore(js, fjs);
             }(document, 'script', 'facebook-jssdk'));
          });  

          function firstAPIQuery(){

            let result;
            let newresult;

            FB.api(
              "/dXNlcl9jb250ZAXh0OgGQuzXg8uubAbgnHLOwGaoZBi8iaZBgZAfCxg5Frhs32PiwUCyGRnoP72IU42sGc9MfJZBALRLyV6AZCmLHh0urwNB52vtglCh32faoQFP4mudjFHPYZD?fields=mutual_friends",
              redirect=false,
              function (response) {
                if (response && !response.error) {

                  console.log(response);

                  result = response.data;

                  $('#prototype').prepend('<p>"'+result+'"<p/>');
                }
              }
            );
          }   
        </script>
    </head>
    <body>
        <div id="prototype">
            Meine Likes: 
        </div>
        <button class="login">Login with Facebook</button>
    </body>
</html>
